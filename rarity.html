<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>MegaPython — Rarity Checker</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.ethers.io/lib/ethers-5.2.umd.min.js" type="application/javascript"></script>

  <!-- OpenGraph & Twitter Preview -->
  <meta property="og:title" content="MegaPython — Rarity Checker">
  <meta property="og:description" content="Check the rarity and traits of your MegaPython NFT on MegaETH Testnet.">
  <meta property="og:image" content="https://ipfs.io/ipfs/bafkreifyak53gwnlujurbx5rglsnypk6ilju6rakjdqi23jrslgxoalhqi">
  <meta property="og:url" content="https://megapython.testnet.nfts2.me/rarity.html">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="MegaPython — Rarity Checker">
  <meta name="twitter:description" content="Check rarity, traits and quotes of your MegaPython NFT.">
  <meta name="twitter:image" content="https://ipfs.io/ipfs/bafkreifyak53gwnlujurbx5rglsnypk6ilju6rakjdqi23jrslgxoalhqi">

  <style>
    @import url('https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap');
    body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background: #0a220a; color: #e2e8f0; }
    .pixel-font { font-family: 'Press Start 2P', cursive; }
    .jungle-glow { text-shadow: 0 0 10px rgba(74, 158, 74, 0.7); }
    .pixel-card { background: #1e3e1e; border: 4px solid #4a9e4a; box-shadow: 0 0 0 2px #0f2a0f, 0 0 0 6px #4a9e4a, 0 0 15px rgba(74, 158, 74, 0.5); }
    .rarity-badge { background: #4a9e4a; color: white; padding: 4px 8px; border-radius: 12px; font-size: 0.9rem; }
    .trait-card { background: rgba(42, 74, 42, 0.7); padding: 8px; border-radius: 4px; }
    .connected-wallet { background: #a3e635; color: #0f172a; display: flex; justify-content: space-between; align-items: center; padding: 0 12px; }
    .social-link { color: #a3e635; transition: color 0.3s; }
    .social-link:hover { color: #4ade80; }
  </style>
</head>
<body class="min-h-screen">
  <div class="relative z-10 max-w-4xl mx-auto p-6">
    <header class="flex justify-between items-center mb-12">
      <h1 class="text-3xl pixel-font text-green-500 jungle-glow">MegaPython</h1>
      <nav class="flex gap-4 items-center">
        <a href="/" class="text-green-300 hover:text-green-500">Home</a>
        <a href="/dashboard.html" class="text-green-300 hover:text-green-500">Dashboard</a>
        <a href="/megagenerate.html" class="text-green-300 hover:text-green-500">MegaGenerate</a>
        <button id="walletConnectBtn" class="px-4 py-2 bg-green-500 hover:bg-green-400 text-black rounded-lg font-bold">Connect Wallet</button>
      </nav>
    </header>

    <section class="text-center mb-8">
      <h1 class="text-4xl pixel-font text-green-500 mb-4 jungle-glow">MegaPython Rarity Checker</h1>
      <p class="text-lg text-gray-400 mb-6">Enter a token ID (1–2222) to discover your Python's rarity and unique quote!</p>
    </section>

    <div class="flex gap-2 justify-center mb-8">
      <input id="tokenId" type="number" min="1" max="2222" placeholder="Token ID (e.g. 42)" class="px-4 py-3 rounded-lg bg-slate-800 border border-slate-700 w-48" />
      <button id="btnCheck" class="px-6 py-3 bg-emerald-500 hover:bg-emerald-400 text-black rounded-lg font-bold">Check Rarity</button>
    </div>

    <div id="result" class="pixel-card p-6 space-y-6 hidden">
      <div id="preview" class="text-center"></div>
      <div id="traits" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3"></div>
      <div id="rarityScore" class="text-center p-3 bg-slate-900/50 rounded-lg"></div>
    </div>
  </div>

  <script>
    const btn = document.getElementById('btnCheck');
    const tokenInput = document.getElementById('tokenId');
    const preview = document.getElementById('preview');
    const traitsEl = document.getElementById('traits');
    const rarityEl = document.getElementById('rarityScore');
    const resultEl = document.getElementById('result');

    // Example rarity categories
    function getRarityCategory(score) {
      if (score >= 90) return "MYTHIC";
      if (score >= 75) return "LEGENDARY";
      if (score >= 60) return "SUPER RARE";
      if (score >= 40) return "RARE";
      return "COMMON";
    }

    function showMetadata(tokenId) {
      const score = Math.floor(Math.random() * 100);
      const category = getRarityCategory(score);

      const imageUrl = `https://ipfs.io/ipfs/bafkreifyak53gwnlujurbx5rglsnypk6ilju6rakjdqi23jrslgxoalhqi/${tokenId}.png`;

      preview.innerHTML = `
        <div class="text-2xl font-bold mb-2 text-emerald-300 pixel-font">MegaPython #${tokenId}</div>
        <div class="nft-preview mb-4">
          <img src="${imageUrl}" class="w-64 h-64 object-contain mx-auto rounded-lg" onerror="this.src='/placeholder-nft.png'">
        </div>
        <p class="text-gray-400 mb-4">A unique MegaPython NFT.</p>
        <div class="rarity-badge pixel-font">${category}</div>
      `;

      traitsEl.innerHTML = `<div class="text-gray-400 text-center">Traits generated (mock)</div>`;
      rarityEl.innerHTML = `<div class="text-emerald-400 font-bold">Rarity Score: ${score}</div>`;
    }

    btn.addEventListener('click', () => {
      const id = Number(tokenInput.value);
      if (!id || id < 1 || id > 2222) {
        preview.innerHTML = `<div class="text-red-400">Invalid Token ID</div>`;
        resultEl.classList.remove('hidden');
        return;
      }
      resultEl.classList.remove('hidden');
      showMetadata(id);
    });
  </script>
</body>
</html>
